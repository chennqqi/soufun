!function(t,o){"use strict";"function"==typeof define?define("share/share",[],function(){return o(t)}):"object"==typeof exports?module.exports=o(t):t.myShare=o(t)}(window,function(t){"use strict";function o(t,o){for(var i=0,n="",e=/[^\x00-\xff]/g,r="",s=t.replace(e,"**").length,p=0;s>p&&(r=t.charAt(p).toString(),null!==r.match(e)?i+=2:i++,!(i>o));p++)n+=r;return s>o&&(n+="..."),n}function i(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);return t}function n(t){var o=[];for(var i in t){var n=i,e=t[n];"[object Array]"===Object.prototype.toString.call(e)&&(e=e.join(",")),null!==e&&(e=encodeURIComponent(e),o.push(n+"="+e))}return o.join("&")}function e(o,i,e){var r=i[o];e=e||{};var s=r.url,p=r.parse(e),a=n(p);s+="?"+a,t.location.href=s}function r(o,n){if(!(this instanceof r))return new r(o,n);this.container=o,this.options=i({},n),this.options.titStr="undefined"!=typeof this.options.tit_con?this.options.tit_con:this.options.title,this.options.tit=this.options.titlesina||this.options.title,this.options.PicUrl=this.options.PicUrl||"",this.options.type=this.options.type||"sf",this.options.url=this.options.backUrl||t.location.href,this.options.summary=this.container.getAttribute("data-text")||this.options.summary,this.creatHTML();var e=document.getElementById("quitBtn"),s=this;e.onclick=function(){s.quit()};for(var p=document.getElementById("share_iconbox"),a=p.childNodes,c=0;c<a.length;c++){var u=a[c];u.onclick=function(t){return function(){s.share(t.name)}}(u)}}return r.prototype.tpl=function(){var t="//static.soufunimg.com/common_m/m_public/",o=['<div class="askpop" id="askpop"><div class="popshare">','<div class="icon_box" id="share_iconbox">','<a href="javascript:void(0);" name="wb"><img src="'+t+'images/s_wb.png">\u65b0\u6d6a\u5fae\u535a</a>','<a href="javascript:void(0);" name="qwb"><img src="'+t+'images/s_ten.png">\u817e\u8baf\u5fae\u535a</a>','<a href="javascript:void(0);" name="qz"><img src="'+t+'images/s_qz.png">QQ\u7a7a\u95f4</a>','</div><div class="m_share_btn"><a href="javascript:void(0);" id="quitBtn">\u53d6 \u6d88</a></div></div></div>'];return o.join("")},r.prototype.creatHTML=function(){var t=document.getElementById("askpop");if(null!==t)return!1;var o=document.createElement("style"),i=this.tpl(),n=document.createElement("div");n.innerHTML=i,this.smartTpl=n.querySelector("#askpop"),o.innerHTML="a{text-decoration:none;}.askpop{position:fixed;top:30%;left:50%;border-radius:3px;width:300px;margin:0 0 0 -150px;z-index:1000;background:rgba(0,0,0,0.8);border-radius:3px; }.popshare{ padding:30px 0 25px 0;}.popshare .icon_box{ text-align:center; font-size:0;}.popshare .icon_box a{display:inline-block;vertical-align:middle;margin:0 15px;font-size:15px;color:#fff;}.popshare .icon_box img{margin-bottom:5px;display:block;width:62px;height:57px;}.popshare .m_share_btn{ color:#fff; text-align:center;}.popshare .m_share_btn a{margin-top:18px;display:inline-block;width:240px;height:34px;line-height:34px;color:#333;font-size:18px;background:#fff;border-radius:3px;}",document.body.appendChild(o),document.body.appendChild(this.smartTpl)},r.prototype.share=function(t){var i=this,n={wb:{url:"http://service.weibo.com/share/share.php",parse:function(){return{url:i.options.url,type:"3",count:i.options.count||"",appkey:"3427098291",title:i.options.tit+o(i.options.titStr+i.options.summary,160),pic:i.options.PicUrl,ralateUid:"",language:"zh_cn",dpc:1,sf_source:i.options.type,rnd:(new Date).valueOf()}}},qz:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",parse:function(){return{url:i.options.url,showcount:"1",desc:o(i.options.title+i.options.summary,160),summary:o(i.options.summary,160),title:i.options.tit,site:i.options.url,pics:i.options.PicUrl,sf_source:i.options.type}}},qwb:{url:"http://share.v.t.qq.com/index.php",parse:function(){return{c:"share",a:"index",f:"f1",m:1,appkey:"801192940",url:i.options.url,title:o(i.options.title+i.options.summary,160),pic:i.options.PicUrl,sf_source:i.options.type}}}};e(t,n)},r.prototype.quit=function(){var t=document.getElementById("askpop");document.body.removeChild(t)},r});